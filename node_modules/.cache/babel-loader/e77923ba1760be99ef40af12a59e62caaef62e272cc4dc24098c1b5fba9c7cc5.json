{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ab905f6e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"vote-page\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  class: \"vote-form\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\"\n}, \"请选择\", -1 /* HOISTED */));\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.selectedVoteType ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, \"请为你喜欢的\" + _toDisplayString($data.voteTypeMap[$data.selectedVoteType]) + \"投票\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedOption = $event),\n    disabled: $data.hasVoted,\n    class: \"vote-select\"\n  }, [_hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, option => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: option.id,\n      value: option.id\n    }, _toDisplayString(option.name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_4), [[_vModelSelect, $data.selectedOption]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.submitVote && $options.submitVote(...args)),\n    disabled: $data.hasVoted,\n    class: \"vote-button\"\n  }, \"Vote\", 8 /* PROPS */, _hoisted_7)]), _createCommentVNode(\"  <p v-if=\\\"hasVoted\\\">您已为 {{ selectedCampaignId }} 投票,选项为:{{ selectedOptionName }}</p>  \"), $data.hasVoted ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"您已为 \" + _toDisplayString($data.selectedCampaignId) + \" 投票,选项为:\" + _toDisplayString($data.selectedOptionName), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","value","disabled","_createElementBlock","_hoisted_1","$data","selectedVoteType","_hoisted_2","_toDisplayString","voteTypeMap","_hoisted_3","_cache","$event","selectedOption","hasVoted","_hoisted_5","_Fragment","_renderList","options","option","id","name","_hoisted_6","_hoisted_4","onClick","args","$options","submitVote","_hoisted_7","_createCommentVNode","_hoisted_8","selectedCampaignId","selectedOptionName"],"sources":["/Users/wangxiao/voting_front/src/components/VotePage.vue"],"sourcesContent":["<!-- VotePage.vue -->\n<template>\n    <div class=\"vote-page\">\n      <div v-if=\"selectedVoteType\">\n        <h2>请为你喜欢的{{ voteTypeMap[selectedVoteType] }}投票</h2>\n        <div class=\"vote-form\">\n          <select v-model=\"selectedOption\" :disabled=\"hasVoted\" class=\"vote-select\">\n            <option value=\"\" disabled>请选择</option>\n            <option v-for=\"option in options\" :key=\"option.id\" :value=\"option.id\">\n              {{ option.name }}\n            </option>\n          </select>\n          <button @click=\"submitVote\" :disabled=\"hasVoted\" class=\"vote-button\">Vote</button>\n        </div>\n        <!--  <p v-if=\"hasVoted\">您已为 {{ selectedCampaignId }} 投票,选项为:{{ selectedOptionName }}</p>  -->\n        <p v-if=\"hasVoted\">您已为 {{ selectedCampaignId }} 投票,选项为:{{ selectedOptionName }}</p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    data() {\n      return {\n        selectedVoteType: '',\n        selectedOption: '',\n        selectedOptionName: '',\n\n        campaigns: [\n        { id: 1, name: 'Project Vote' },\n        { id: 2, name: 'People Vote' },\n        { id: 3, name: 'Product Vote' }\n        ],\n        selectedCampaignId: '',\n        selectedCampaignName: '',\n        \n        hasVoted: false,\n        voteTypeMap: {\n          //  ID - Name\n          project: 'Project',\n          people: 'People',\n          product: 'Product'\n        },\n        // options { id: 1, name: 'Project 1' },\n        options: [],\n        votedOptions: {}\n      };\n    },\n    watch: {\n      //$route.params.type是一个特殊的Vue实例属性，它用来监听当前路由参数type的变化\n      '$route.params.type': {\n        immediate: true,\n        handler(newType) {\n          this.selectedVoteType = newType;\n          this.fetchOptions();\n          this.loadVotedOption();\n        }\n      }\n    },\n    methods: {\n      fetchOptions() {\n        // 模拟从后端获取选项数据,根据不同的投票类型获取相应的选项\n        let options = [];\n        if (this.selectedVoteType === 'project') {\n          options = [\n            { id: 1, name: 'Project 1' },\n            { id: 2, name: 'Project 2' },\n            { id: 3, name: 'Project 3' }\n          ];\n        } else if (this.selectedVoteType === 'people') {\n          options = [\n            { id: 1, name: 'Alice' },\n            { id: 2, name: 'Bob' },\n            { id: 3, name: 'Charlie' }\n          ];\n        } else if (this.selectedVoteType === 'product') {\n          options = [\n            { id: 1, name: 'Apple' },\n            { id: 2, name: 'Banana' },\n            { id: 3, name: 'Orange' }\n          ];\n        }\n        this.options = options;\n      },\n      submitVote() {\n        // 提交投票请求到后端\n        // 这里简化处理,直接更新数据\n        this.hasVoted = true;\n        //this.selectedCampaignId = 'Campaign123';\n        const campaign = this.campaigns.find(c => c.name.toLowerCase() === this.selectedVoteType);\n        this.selectedCampaignId = campaign.id;\n        this.selectedCampaignName = campaign.name;\n        this.selectedOptionName = this.options.find(option => option.id === this.selectedOption).name;\n        this.saveVotedOption();\n        this.$emit('vote-submitted');\n      },\n      saveVotedOption() {\n        this.votedOptions[this.selectedVoteType] = {\n          selectedOption: this.selectedOption,\n          selectedOptionName: this.selectedOptionName,\n          selectedCampaignId: this.selectedCampaignId,\n          selectedCampaignName: this.selectedCampaignName\n        };\n      },\n      loadVotedOption() {\n        if (this.votedOptions[this.selectedVoteType]) {\n          const { selectedOption, selectedCampaignId, selectedOptionName } = this.votedOptions[this.selectedVoteType];\n          this.selectedOption = selectedOption;\n          this.selectedOptionName = selectedOptionName;\n          this.selectedCampaignId = selectedCampaignId;\n          this.selectedCampaignName = selectedCampaignName;\n          this.hasVoted = true;\n        } else {\n          this.resetForm();\n        }\n      },\n      resetForm() {\n        this.selectedOption = '';\n        this.hasVoted = false;\n        this.selectedCampaignId = '';\n        this.selectedCampaignName = '';\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .vote-form {\n    display: flex;\n    align-items: center;\n    margin-bottom: 20px;\n  }\n  \n  .vote-select {\n    margin-right: 20px;\n  }\n  \n  .vote-button {\n    background-color: #007bff;\n    color: #fff;\n    border: none;\n    padding: 10px 20px;\n    cursor: pointer;\n  }\n  \n  .vote-button:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n  }\n  \n  select:disabled {\n    background-color: #f0f0f0;\n  }\n  </style>"],"mappings":";;;EAESA,KAAK,EAAC;AAAW;;EAF1BC,GAAA;AAAA;;EAKaD,KAAK,EAAC;AAAW;mBAL9B;gEAOYE,mBAAA,CAAsC;EAA9BC,KAAK,EAAC,EAAE;EAACC,QAAQ,EAAR;GAAS,KAAG;mBAPzC;mBAAA;;EAAAH,GAAA;AAAA;;uBAEII,mBAAA,CAeM,OAfNC,UAeM,GAdOC,KAAA,CAAAC,gBAAgB,I,cAA3BH,mBAAA,CAaM,OAhBZI,UAAA,GAIQP,mBAAA,CAAoD,YAAhD,QAAM,GAAAQ,gBAAA,CAAGH,KAAA,CAAAI,WAAW,CAACJ,KAAA,CAAAC,gBAAgB,KAAI,IAAE,iBAC/CN,mBAAA,CAQM,OARNU,UAQM,G,gBAPJV,mBAAA,CAKS;IAXnB,uBAAAW,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAM2BP,KAAA,CAAAQ,cAAc,GAAAD,MAAA;IAAGV,QAAQ,EAAEG,KAAA,CAAAS,QAAQ;IAAEhB,KAAK,EAAC;MAC1DiB,UAAsC,G,kBACtCZ,mBAAA,CAESa,SAAA,QAVrBC,WAAA,CAQqCZ,KAAA,CAAAa,OAAO,EAAjBC,MAAM;yBAArBhB,mBAAA,CAES;MAF0BJ,GAAG,EAAEoB,MAAM,CAACC,EAAE;MAAGnB,KAAK,EAAEkB,MAAM,CAACC;wBAC7DD,MAAM,CAACE,IAAI,wBAT5BC,UAAA;kDAAAC,UAAA,I,gBAM2BlB,KAAA,CAAAQ,cAAc,E,GAM/Bb,mBAAA,CAAkF;IAAzEwB,OAAK,EAAAb,MAAA,QAAAA,MAAA,UAAAc,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAGvB,QAAQ,EAAEG,KAAA,CAAAS,QAAQ;IAAEhB,KAAK,EAAC;KAAc,MAAI,iBAZnF8B,UAAA,E,GAcQC,mBAAA,6FAA8F,EACrFxB,KAAA,CAAAS,QAAQ,I,cAAjBX,mBAAA,CAAmF,KAf3F2B,UAAA,EAe2B,MAAI,GAAAtB,gBAAA,CAAGH,KAAA,CAAA0B,kBAAkB,IAAG,UAAQ,GAAAvB,gBAAA,CAAGH,KAAA,CAAA2B,kBAAkB,oBAfpFH,mBAAA,e,KAAAA,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}