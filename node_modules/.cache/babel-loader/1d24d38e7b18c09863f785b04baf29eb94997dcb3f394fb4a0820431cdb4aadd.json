{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ab905f6e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"vote-page\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  class: \"vote-form\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\"\n}, \"请选择\", -1 /* HOISTED */));\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.selectedVoteType ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, \"请为你喜欢的\" + _toDisplayString($data.voteTypeMap[$data.selectedVoteType]) + \"投票\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedOption = $event),\n    disabled: $data.hasVoted[$data.selectedVoteType],\n    class: \"vote-select\"\n  }, [_hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, option => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: option.id,\n      value: option.id\n    }, _toDisplayString(option.name), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_4), [[_vModelSelect, $data.selectedOption]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.submitVote && $options.submitVote(...args)),\n    disabled: $data.hasVoted[$data.selectedVoteType],\n    class: \"vote-button\"\n  }, \"Vote\", 8 /* PROPS */, _hoisted_7)]), $data.hasVoted[$data.selectedVoteType] ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"您已为 \" + _toDisplayString($data.selectedCampaignName) + \" 投票,选项为:\" + _toDisplayString($data.selectedOptionName[$data.selectedVoteType]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.submitAllVotes && $options.submitAllVotes(...args)),\n    disabled: $data.allVotesSubmitted,\n    class: \"submit-all-button\"\n  }, \"Submit All Votes\", 8 /* PROPS */, _hoisted_9)]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","value","disabled","_createElementBlock","_hoisted_1","$data","selectedVoteType","_hoisted_2","_toDisplayString","voteTypeMap","_hoisted_3","_cache","$event","selectedOption","hasVoted","_hoisted_5","_Fragment","_renderList","options","option","id","name","_hoisted_6","_hoisted_4","onClick","args","$options","submitVote","_hoisted_7","_hoisted_8","selectedCampaignName","selectedOptionName","_createCommentVNode","submitAllVotes","allVotesSubmitted","_hoisted_9"],"sources":["/Users/wangxiao/voting_front/src/components/VotePage.vue"],"sourcesContent":["<template>\n  <div class=\"vote-page\">\n    <div v-if=\"selectedVoteType\">\n      <h2>请为你喜欢的{{ voteTypeMap[selectedVoteType] }}投票</h2>\n      <div class=\"vote-form\">\n        <select v-model=\"selectedOption\" :disabled=\"hasVoted[selectedVoteType]\" class=\"vote-select\">\n          <option value=\"\" disabled>请选择</option>\n          <option v-for=\"option in options\" :key=\"option.id\" :value=\"option.id\">{{ option.name }}</option>\n        </select>\n        <button @click=\"submitVote\" :disabled=\"hasVoted[selectedVoteType]\" class=\"vote-button\">Vote</button>\n      </div>\n      <p v-if=\"hasVoted[selectedVoteType]\">您已为 {{ selectedCampaignName }} 投票,选项为:{{ selectedOptionName[selectedVoteType] }}</p>\n    </div>\n    <button @click=\"submitAllVotes\" :disabled=\"allVotesSubmitted\" class=\"submit-all-button\">Submit All Votes</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['type'],\n  data() {\n    return {\n      selectedVoteType: this.type,\n      selectedOption: '',\n      selectedCampaignId: '',\n      selectedCampaignName: '',\n      selectedOptionName: { project: '', people: '', product: '' },\n      hasVoted: { project: false, people: false, product: false },\n      allVotesSubmitted: false,\n      voteTypeMap: { project: 'Project Vote', people: 'People Vote', product: 'Product Vote' },\n      options: [],\n      voteResults: []\n    };\n  },\n  watch: {\n    type(newType) {\n      this.selectedVoteType = newType;\n      this.fetchOptions();\n    }\n  },\n  methods: {\n    fetchOptions() {\n      // fetch logic based on selectedVoteType\n    },\n    submitVote() {\n      if (!this.selectedOption) {\n        alert('Please select an option before voting!');\n        return;\n      }\n      this.hasVoted[this.selectedVoteType] = true;\n      const option = this.options.find(option => option.id === this.selectedOption);\n      const result = {\n        campaignId: this.selectedCampaignId,\n        optionId: this.selectedOption,\n        campaignName: this.selectedCampaignName,\n        optionName: option.name\n      };\n      this.voteResults.push(result);\n    },\n    submitAllVotes() {\n      this.allVotesSubmitted = true;\n      localStorage.setItem('votingResults', JSON.stringify(this.voteResults));\n      this.$router.push('/result');\n    }\n  },\n  created() {\n    this.fetchOptions();\n  }\n};\n</script>\n\n<style scoped>\n.vote-form {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n.vote-select {\n  margin-right: 20px;\n}\n.vote-button, .submit-all-button {\n  background-color: #007bff;\n  color: #fff;\n  border: none;\n  padding: 10px 20px;\n  cursor: pointer;\n}\n.vote-button:disabled, .submit-all-button:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\nselect:disabled {\n  background-color: #f0f0f0;\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;;EADxBC,GAAA;AAAA;;EAIWD,KAAK,EAAC;AAAW;mBAJ5B;gEAMUE,mBAAA,CAAsC;EAA9BC,KAAK,EAAC,EAAE;EAACC,QAAQ,EAAR;GAAS,KAAG;mBANvC;mBAAA;;EAAAH,GAAA;AAAA;mBAAA;;uBACEI,mBAAA,CAaM,OAbNC,UAaM,GAZOC,KAAA,CAAAC,gBAAgB,I,cAA3BH,mBAAA,CAUM,OAZVI,UAAA,GAGMP,mBAAA,CAAoD,YAAhD,QAAM,GAAAQ,gBAAA,CAAGH,KAAA,CAAAI,WAAW,CAACJ,KAAA,CAAAC,gBAAgB,KAAI,IAAE,iBAC/CN,mBAAA,CAMM,OANNU,UAMM,G,gBALJV,mBAAA,CAGS;IARjB,uBAAAW,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKyBP,KAAA,CAAAQ,cAAc,GAAAD,MAAA;IAAGV,QAAQ,EAAEG,KAAA,CAAAS,QAAQ,CAACT,KAAA,CAAAC,gBAAgB;IAAGR,KAAK,EAAC;MAC5EiB,UAAsC,G,kBACtCZ,mBAAA,CAAgGa,SAAA,QAP1GC,WAAA,CAOmCZ,KAAA,CAAAa,OAAO,EAAjBC,MAAM;yBAArBhB,mBAAA,CAAgG;MAA7DJ,GAAG,EAAEoB,MAAM,CAACC,EAAE;MAAGnB,KAAK,EAAEkB,MAAM,CAACC;wBAAOD,MAAM,CAACE,IAAI,wBAP9FC,UAAA;kDAAAC,UAAA,I,gBAKyBlB,KAAA,CAAAQ,cAAc,E,GAI/Bb,mBAAA,CAAoG;IAA3FwB,OAAK,EAAAb,MAAA,QAAAA,MAAA,UAAAc,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAGvB,QAAQ,EAAEG,KAAA,CAAAS,QAAQ,CAACT,KAAA,CAAAC,gBAAgB;IAAGR,KAAK,EAAC;KAAc,MAAI,iBATnG8B,UAAA,E,GAWevB,KAAA,CAAAS,QAAQ,CAACT,KAAA,CAAAC,gBAAgB,K,cAAlCH,mBAAA,CAAyH,KAX/H0B,UAAA,EAW2C,MAAI,GAAArB,gBAAA,CAAGH,KAAA,CAAAyB,oBAAoB,IAAG,UAAQ,GAAAtB,gBAAA,CAAGH,KAAA,CAAA0B,kBAAkB,CAAC1B,KAAA,CAAAC,gBAAgB,qBAXvH0B,mBAAA,e,KAAAA,mBAAA,gBAaIhC,mBAAA,CAAiH;IAAxGwB,OAAK,EAAAb,MAAA,QAAAA,MAAA,UAAAc,IAAA,KAAEC,QAAA,CAAAO,cAAA,IAAAP,QAAA,CAAAO,cAAA,IAAAR,IAAA,CAAc;IAAGvB,QAAQ,EAAEG,KAAA,CAAA6B,iBAAiB;IAAEpC,KAAK,EAAC;KAAoB,kBAAgB,iBAb5GqC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}